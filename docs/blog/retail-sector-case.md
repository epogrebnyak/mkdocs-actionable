## Надежность и отказоустойчивость в секторе розничной торговли

[v10n.com/retail](https://v10n.com/retail)

Заявка на участие в [X5 Pitch Day](https://x5pitch-day.iidf.ru) - 17.08.2020

### Суть вашего проекта/стартапа (целевая аудитория, какую проблему решает, каким образом)

Мы предлагаем компаниям организацию тестирования отказоустойчивости высоконагруженных ИТ-систем в стадии эксплуатации с целью снижения затрат на инциденты, путем проактивного обнаружения уязвимостей на инфраструктурном и прикладном уровне.

Мы применяем методики хаос-тестирования, впервые предложенные Netflix и Amazon для проверки отказоустойчивости высоконагруженных сервисов, например, видеостриминга. В сфере розничной торговли предлагаемый нами подход использует, например, [Walmart](https://www.gremlin.com/blog/vilas-veeraraghaven-practicing-chaos-engineering-at-walmart-chaos-conf-2018).

Данная методология может использоваться для проверки отказоустойчивости сервисов поставляемых внешними подрядчиками, при проверке монолитных, смешанных монолитно-микросервисных, микросервисных и облачных решений. Хаос-тестирование также позволяет выявить потенциальные инциденты, возникающих на стыке зон ответственности различных разработчиков и владельцев систем.

### Базовая услуга 

Наша базовая услуга -- разработка сценариев для проведения испытаний автоматизированных систем на инфраструктурном и прикладном уровне для выявления риска возникновения инцидентов. Как правило, команда клиента способна сама предложить некоторые виды простых испытаний. Сценарии для более сложных, комплексных уязвимости, несущих риск наиболее дорогостоящих инцидентов, требуют опыта анализа большого количества ИТ-систем и сервисов в разных условиях, который есть у нашей команды. 

Испытания проводятся на стенде заказчика, результатом является отчет по уязвимостям системы. Проведенные тесты самостоятельно переиспользуются командой клиента для подтверждения устранения уязвимостей. Дополнительные выигрыши от проведения тестов состоят в проверке корректной работы систем мониторинга и в обучении команд разработки и эксплуатации работе с экстремальными ситуациями.

Предлагаемая нами методология и сценарии тестирования обязательны для обеспечения качества управления и снижения инцидентов в современных системах. X5 Retail Group использует распределенные системы со сложной архитектурой, что неизбежно влечет риски отказов.  В 2020 году Perekrestok.ru принимал 11 тысяч заказов в день или 7,6 заказов в минуту. Час простоя такого сервиса будет стоить 456 заказов, и мы знаем, как сократить вероятность такого простоя, уменьшить как среднегодовые потери от сбоев ИТ-системы и объем средств, резервируемых на мероприятия по восстановлению системы, которые могут быть перенаправлены на другие ИТ-задачи.

### Пример испытания надежности 

Мы провели испытания транзакционной системы, которая производила учет и регистрацию списания средств на счетах клиентов с нормой обработки 250 транзакций в секунду. В ходе испытаний была выявлена ситуация, что при комбинации небольших сетевым потерь на одном узле более чем на половину деградировал весь сервис (до 110 транзакций в секунду). Это было связанно с особенностью архитектуры сервиса и конкретными настройками системы в эксплуатации. При проявлении такой ситуации в промышленной эксплуатации единственным решением было бы перейти на резервный контур, что заняло бы около 5 минут. В случае инцидента компания потеряла бы около 42 000 клиентских транзакций. 

Команда разработки использовала результаты наших тестов, чтобы доработать систему и ее мониторинг, и внедрила автоматическое решение по самовосстановлению сервиса, повторно провела тесты для подтверждения результатов. 

После устранения уязвимости также снизилась стоимость риска: раньше нужен был бюджет на разбор и ликвидацию последствий ситуации с таким инцидентом (включая колл-центр, сопровождение системы, "костыльное" временное решение). Высвободившийся бюджет перераспределен на другие ИТ-задачи.

Благодаря тестам команда эксплуатации также получила дополнительный опыт диагностики и противодействия экстремальным ситуациям на ИТ-системе.

### Пилотный проект с X5 Retail Group. Какую проблему может решить ваш проект? Какой предполагаемый экономический эффект от внедрения?

Мы решаем проблему проактивного обнаружения возможных причин возникновения инцидентов до их фактического наступления в промышленной среде. 

В пилотном проекте для X5 Retail Group необходимо выбрать систему или сервис с высокой ценой простоя, более частыми по сравнению с другими системами сбоями и/или высокой стоимостью сопровождения системы. После обследования архитектуры, определения ключевых пользовательских сценариев и классификации истории инцидентов мы готовим набор сценариев для хаос-тестов с ограниченным внедрением инфраструктурных сбоев и сбоев уровня приложений. Испытания выполняются на стенде заказчика, близком к фактической производственной системе. По результатам испытаний нами готовится отчет, показывающий уязвимости и их критичность. На основе отчета команда заказчика принимает решения о доработке сервиса, переиспользует подготовленные нами сценарии тестов для верификации результатов доработки системы. Типовой срок подготовки и проведения испытаний составляет 22-25 дней.

Прямой экономический эффект от повышения надежности складывается от снижения количества инцидентов и их длительности, включая частичные деградации сервисов. Например, интернет-магазин с 400 заказами в час и 4 инцидентами в месяц со временем восстановление 1 час теряет 1200 заказов прямых недополученных доходов, без учета дополнительных расходов по привлечению клиентов и ущерба деловой репутации. В результате мероприятий по хаос-тестированию и последующей доработки системы снижается недополученная прибыль, уменьшается риск экстремальных, но дорогостоящих сбоев, ведущих к длительным простоям системы. Косвенные выигрыши состоят в росте компетенций всех участников команды после проведения хаос-тестирования, повышения технологического уровня разработки, улучшении процедур взаимодействия с поставщиками и партнерами в сфере ИТ, готовности к реализации более сложных ИТ-проектов.

### Примеры инцидентов с надежностью в розничной торговле за рубежом 

- [Myer (Австралия), 2019](https://www.abc.net.au/news/2019-12-14/myer-cash-registers-crash-during-peak-christmas-shopping/11800466)
- [Costcо (США), 2019](https://www.businessinsider.com/costco-website-outage-costs-millions-in-sales-2019-11)
- [Сбои в предновогодний период в США, экспертное мнение](https://www.retaildive.com/news/are-retailers-doomed-for-more-outages-this-holiday-season/564239)
